/** @file     DCM_ModeTask.c
  *
  * @brief    Task DCM_ModeTask body
  *
  * @note     AUTOMATICALLY GENERATED FILE! DO NOT EDIT!
  *
  * @note     Generated by ETAS RTA-RTE
  * @note     Version 6.4.1 
  */

#define RTE_CORE

#include "Rte_Const.h"
#if !defined(RTE_VENDOR_MODE)
#pragma message "Compiling an individual task file but RTE_VENDOR_MODE not defined. Compiling a stale file?"
#endif /* !defined(RTE_VENDOR_MODE) */
#if defined(RTE_USE_TASK_HEADER)
#include "DCM_ModeTask.h"
#else /* !defined(RTE_USE_TASK_HEADER) */
#include "Os.h"
#endif /* !defined(RTE_USE_TASK_HEADER) */
#if defined(RTE_REQUIRES_IOC)
#include "Ioc.h"
#endif /* defined(RTE_REQUIRES_IOC) */
#include "Rte.h"
#include "Rte_Intl.h"
#include "Rte_Type.h"
#include "Rte_DataHandleType.h"

#define RTE_START_SEC_VAR_INIT_8
#include "Rte_MemMap.h" /*lint !e537 permit multiple inclusion */
extern VAR(uint8, RTE_DATA) Rte_ModeCurrent_4;

extern VAR(uint8, RTE_DATA) Rte_ModeNext_4;

extern VAR(uint8, RTE_DATA) Rte_ModeSchMNext_4;

#define RTE_STOP_SEC_VAR_INIT_8
#include "Rte_MemMap.h" /*lint !e537 permit multiple inclusion */

/* Runnable entity prototypes */
#define Dcm_SWC_START_SEC_CODE
#include "Dcm_SWC_MemMap.h" /*lint !e537 permit multiple inclusion */
FUNC(void, Dcm_SWC_CODE) RE_JumpToOEMBootloader(void);
FUNC(void, Dcm_SWC_CODE) SwcDcmEcuHardReset_func(void);
FUNC(void, Dcm_SWC_CODE) SwcDcmEcuSoftReset_func(void);
#define Dcm_SWC_STOP_SEC_CODE
#include "Dcm_SWC_MemMap.h" /*lint !e537 permit multiple inclusion */

#define RTE_START_SEC_CODE
#include "Rte_MemMap.h" /*lint !e537 permit multiple inclusion */
TASK(DCM_ModeTask)
{
   uint8 Rte_ShadowModeNext_4;
   uint8 Rte_ShadowModeSchMNext_4;

   /* Box: Implicit Buffer Initialization begin */
   /* Box: Implicit Buffer Initialization end */
   /* Box: EnterSynchronizationBox begin */
   /* SpecReq: Enter OS Exclusive Area begin */
   Rte_SuspendOSInterrupts();
   /* SpecReq: Enter OS Exclusive Area end */
   /* Box: EnterSynchronizationBox end */
   /* Box: Rte_ModeShadowCopyBlock_4 begin */
   /* Box: Rte_ModeNext_4 begin */
   Rte_ShadowModeNext_4 = Rte_ModeNext_4;
   /* Box: Rte_ModeNext_4 end */
   /* Box: Rte_ModeOld_4 begin */
   /* Box: Rte_ModeOld_4 end */
   /* Box: Rte_ModeSchMNext_4 begin */
   Rte_ShadowModeSchMNext_4 = Rte_ModeSchMNext_4;
   /* Box: Rte_ModeSchMNext_4 end */
   /* Box: Rte_ModeSchMOld_4 begin */
   /* Box: Rte_ModeSchMOld_4 end */
   /* Box: Rte_ModeShadowCopyBlock_4 end */
   /* Box: ExitSynchronizationBox begin */
   /* SpecReq: Exit OS Exclusive Area begin */
   Rte_ResumeOSInterrupts();
   /* SpecReq: Exit OS Exclusive Area end */
   /* Box: ExitSynchronizationBox end */
   /* Box: Implicit Buffer Fill begin */
   /* Box: Implicit Buffer Fill end */
   /* Box: CPT_Dcm_Swc begin */
   if ( Rte_ShadowModeNext_4 == 5 )
   {
      SwcDcmEcuSoftReset_func();
   }
   /* Box: CPT_Dcm_Swc end */
   /* Box: CPT_Dcm_Swc begin */
   if ( Rte_ShadowModeNext_4 == 2 )
   {
      RE_JumpToOEMBootloader();
   }
   /* Box: CPT_Dcm_Swc end */
   /* Box: CPT_Dcm_Swc begin */
   if ( Rte_ShadowModeNext_4 == 1 )
   {
      SwcDcmEcuHardReset_func();
   }
   /* Box: CPT_Dcm_Swc end */
   /* Box: Rte_ModeInstance_4 begin */
   if ( ( Rte_ShadowModeNext_4 != 6 ) || ( Rte_ShadowModeSchMNext_4 != 6 ) )
   {
      /* set new mdd */
      {
         /* SpecReq: Enter OS Exclusive Area begin */
         Rte_SuspendOSInterrupts();
         /* SpecReq: Enter OS Exclusive Area end */
         if ( SchM_Initialized != FALSE )
         {
            Rte_ModeCurrent_4 = Rte_ShadowModeSchMNext_4;
         }
         if ( Rte_Initialized != FALSE )
         {
            Rte_ModeCurrent_4 = Rte_ShadowModeNext_4;
         }
         Rte_ModeSchMNext_4 = 6;
         Rte_ModeNext_4 = 6;
         /* SpecReq: Exit OS Exclusive Area begin */
         Rte_ResumeOSInterrupts();
         /* SpecReq: Exit OS Exclusive Area end */
         /* SpecReq: MSA invoke begin */
         /* SpecReq: MSA invoke end */
      }
   }
   /* Box: Rte_ModeInstance_4 end */
   /* Box: Implicit Buffer Flush begin */
   /* Box: Implicit Buffer Flush end */
   TerminateTask();
} /* DCM_ModeTask */
#define RTE_STOP_SEC_CODE
#include "Rte_MemMap.h" /*lint !e537 permit multiple inclusion */

